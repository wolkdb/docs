
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="images/wolk_favicon.png" rel="icon" type="image/png" />
    <title>SWARMDB API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;,&quot;go&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" /></center>
      </span>
    </a>
    <div class="toc-wrapper">
      <center><img src="images/logo.png" class="logo" alt="Logo" /></center>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">Node.js</a>
              <a href="#" data-language-name="go">Go</a>
              <a href="#" data-language-name="shell">HTTP</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
          </li>
          <li>
            <a href="#install" class="toc-h1 toc-link" data-title="install">Install</a>
          </li>
          <li>
            <a href="#configure" class="toc-h1 toc-link" data-title="configure">Configure</a>
          </li>
          <li>
            <a href="#connect" class="toc-h1 toc-link" data-title="connect">Connect</a>
          </li>
          <li>
            <a href="#create-database" class="toc-h1 toc-link" data-title="create-database">Create Database</a>
          </li>
          <li>
            <a href="#create-table" class="toc-h1 toc-link" data-title="create-table">Create Table</a>
          </li>
          <li>
            <a href="#opening-a-database" class="toc-h1 toc-link" data-title="opening-a-database">Opening a Database</a>
          </li>
          <li>
            <a href="#opening-a-table" class="toc-h1 toc-link" data-title="opening-a-table">Opening a Table</a>
          </li>
          <li>
            <a href="#read" class="toc-h1 toc-link" data-title="read">Read</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get" class="toc-h2 toc-link" data-title="get">Get</a>
                  </li>
                  <li>
                    <a href="#select" class="toc-h2 toc-link" data-title="select">Select</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#write" class="toc-h1 toc-link" data-title="write">Write</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#put" class="toc-h2 toc-link" data-title="put">Put</a>
                  </li>
                  <li>
                    <a href="#insert" class="toc-h2 toc-link" data-title="insert">Insert</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="errors">Errors</a>
          </li>
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>SwarmDB is being developed by <a href="https://www.wolk.com/">Wolk Inc.</a> to support decentralized database services.  </p>

<p>Prospective database users can use our NoSQL interfaces to store and retrieve data from a network of SwarmDB nodes that store chunks representing database records.  </p>

<p>This is a pre-alpha project under active development with Ethereum Swarm. To install the current version, please <a href="https://github.com/wolktoken/swarm.wolk.com/blob/master/README.md">README</a>. </p>

<p>If you require further assistance, feel free to shoot us an email: services@wolk.com</p>
<h1 id='install'>Install</h1><pre class="highlight javascript tab-javascript"><code><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">swarmdb</span><span class="p">.</span><span class="nx">js</span> <span class="o">--</span><span class="nx">save</span>
<span class="c1">// Note that since web3 module has some issues to be installed at a latest version, you need to install it manually right now.</span>
<span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">web3</span><span class="p">@</span><span class="nd">1</span><span class="p">.</span><span class="mf">0.0</span><span class="o">-</span><span class="nx">beta</span><span class="p">.</span><span class="mi">26</span>
</code></pre><pre class="highlight go tab-go"><code><span class="k">go</span><span class="x"> </span><span class="n">get</span><span class="x"> </span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">wolkdb</span><span class="o">/</span><span class="n">swarmdb</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>// Check that wolkdb is running and that you can <span class="k">do </span>curl calls
<span class="gp">$ </span>ps aux | grep swarmdb
<span class="gp">$ </span>curl https://www.google.com | wc
</code></pre>
<p>To use SWARMDB API, you need to install the corresponding library.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">swarmdbAPI</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"swarmdb.js"</span><span class="p">);</span>
</code></pre><pre class="highlight go tab-go"><code><span class="k">import</span><span class="x"> </span><span class="s">"github.com/wolkdb/swarmdb"</span><span class="x">
</span></code></pre>
<p>Import the library in your project.</p>
<h1 id='configure'>Configure</h1>
<p>Upon installation and startup of your SWARMDB node, a default user and associated private key are generated and stored in the <a href="https://github.com/wolktoken/swarm.wolk.com/wiki/9.-SWARMDB-Server-Configuration,--Authentication-and-Voting#configuration-file">SWARMDB configuration file</a>.  </p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">$</span> <span class="kr">export</span> <span class="nx">PRIVATE_KEY</span><span class="o">=</span><span class="nx">PRIVATE_KEY_IN_YOUR_CONFIG_FILE</span>
</code></pre>
<p>Set the private key associated with this user as an environment variable. </p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">$</span> <span class="kr">export</span> <span class="nx">PROVIDER</span><span class="o">=</span><span class="nx">YOUR_PROVIDER_LINK</span>
</code></pre>
<p>(Optional) You can also specify an Ethereum provider instead of using the default http://localhost:8545</p>
<h1 id='connect'>Connect</h1><pre class="highlight javascript tab-javascript"><code><span class="c1">// swarmdbAPI.createConnection(options)</span>
<span class="kd">var</span> <span class="nx">swarmdb</span> <span class="o">=</span> <span class="nx">swarmdbAPI</span><span class="p">.</span><span class="nx">createConnection</span><span class="p">({</span>
    <span class="na">host</span><span class="p">:</span> <span class="nx">SWARMDB_HOST</span><span class="p">,</span> <span class="c1">//e.g. "localhost"</span>
    <span class="na">port</span><span class="p">:</span> <span class="nx">SWARMDB_PORT</span>  <span class="c1">//e.g. 2001</span>
<span class="p">});</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (db *SWARMDBDatabase) OpenConnection(options) </span><span class="x">
</span><span class="n">options</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">SWARMDBConnectionOptions</span><span class="p">{</span><span class="s">"ip"</span><span class="o">:</span><span class="x"> </span><span class="n">SWARMDB_HOST</span><span class="p">,</span><span class="x"> </span><span class="s">"port"</span><span class="o">:</span><span class="x"> </span><span class="n">SWARMDB_PORT</span><span class="p">}</span><span class="x">
</span><span class="n">conn</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">swarmdb</span><span class="o">.</span><span class="n">OpenConnection</span><span class="p">(</span><span class="n">options</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not open connection"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>For more information on this see https://github.com/wolkdb/swarm.wolk.com/wiki/5.-HTTP-Interface#authentication
</code></pre>
<p>Open a connection by specifying the host and port of the SWARMDB node.  Specific details may be found in the <a href="https://github.com/wolktoken/swarm.wolk.com/wiki/8.-SWARMDB-Server-Configuration,--Authentication-and-Voting#configuration-file">SWARMDB configuration file</a>.</p>
<h1 id='create-database'>Create Database</h1><pre class="highlight javascript tab-javascript"><code><span class="c1">// swarmdb.createDatabase(db, owner, encrypted, callback)</span>
<span class="nx">swarmdb</span><span class="p">.</span><span class="nx">createDatabase</span><span class="p">(</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"test.eth"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (db *SWARMDBConnection) CreateDatabase(owner string, databaseName string)</span><span class="x">
</span><span class="n">owner</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"test.eth"</span><span class="x">
</span><span class="n">databaseName</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"testdb"</span><span class="x">
</span><span class="n">db</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">conn</span><span class="o">.</span><span class="n">CreateDatabase</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span><span class="x"> </span><span class="n">databaseName</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not create database"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -d <span class="s1">'{ "requesttype":"CreateDatabase", "encrypted":0 }'</span>  <span class="se">\ </span>
     <span class="s2">"http://localhost:8501/testdb.test.eth/"</span> 
</code></pre>
<p>Create a database by specifying database name, owner and encrypted status.  </p>

<p>Owner should be a valid ENS domain.</p>

<p>For encrypted status, 1 means true and 0 means false.</p>
<h1 id='create-table'>Create Table</h1><pre class="highlight javascript tab-javascript"><code><span class="c1">// swarmdb.createTable(db, table, owner, columns, callback)</span>
<span class="kd">var</span> <span class="nx">columns</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span> <span class="s2">"columnname"</span><span class="p">:</span> <span class="s2">"email"</span><span class="p">,</span> <span class="s2">"columntype"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"indextype"</span><span class="p">:</span> <span class="s2">"bplus"</span><span class="p">,</span> <span class="s2">"primary"</span><span class="p">:</span> <span class="mi">1</span> <span class="p">},</span>
  <span class="p">{</span> <span class="s2">"columnname"</span><span class="p">:</span> <span class="s2">"name"</span><span class="p">,</span> <span class="s2">"columntype"</span><span class="p">:</span> <span class="s2">"string"</span><span class="p">,</span> <span class="s2">"indextype"</span><span class="p">:</span> <span class="s2">"hash"</span> <span class="p">},</span>
  <span class="p">{</span> <span class="s2">"columnname"</span><span class="p">:</span> <span class="s2">"age"</span><span class="p">,</span> <span class="s2">"columntype"</span><span class="p">:</span> <span class="s2">"integer"</span><span class="p">,</span> <span class="s2">"indextype"</span><span class="p">:</span> <span class="s2">"bplus"</span> <span class="p">}</span>
<span class="p">];</span>
<span class="nx">swarmdb</span><span class="p">.</span><span class="nx">createTable</span><span class="p">(</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"contacts"</span><span class="p">,</span> <span class="s2">"test.eth"</span><span class="p">,</span> <span class="nx">columns</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (db *SWARMDBDatabase) CreateTable(tableName string, []Column)</span><span class="x">
</span><span class="c">// Create Table</span><span class="x">
</span><span class="n">tableName</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"contacts"</span><span class="x">
</span><span class="n">cols</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="nb">make</span><span class="p">([]</span><span class="n">swarmdb</span><span class="o">.</span><span class="n">Column</span><span class="p">,</span><span class="x"> </span><span class="m">3</span><span class="p">)</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">ColumnName</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"email"</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">Primary</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">1</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">IndexType</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"bplus"</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">0</span><span class="p">]</span><span class="o">.</span><span class="n">ColumnType</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"string"</span><span class="x">

</span><span class="n">cols</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="o">.</span><span class="n">ColumnName</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"name"</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="o">.</span><span class="n">IndexType</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"hash"</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="o">.</span><span class="n">ColumnType</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"string"</span><span class="x">

</span><span class="n">cols</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="o">.</span><span class="n">ColumnName</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"age"</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="o">.</span><span class="n">IndexType</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"bplus"</span><span class="x">
</span><span class="n">cols</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="o">.</span><span class="n">ColumnType</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"integer"</span><span class="x">

</span><span class="n">tbl</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">db</span><span class="o">.</span><span class="n">CreateTable</span><span class="p">(</span><span class="n">tableName</span><span class="p">,</span><span class="x"> </span><span class="n">cols</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not create table"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -d <span class="s1">'{ "requesttype":"CreateTable", "table":"contacts", \
      "columns":[{ "columnName":"email", "ColumnType":"string", "Primary":1, "IndexType":”bplus” }, \ 
                 { "columnname":"name", "columntype":"string", "IndexType":"hash" }, \
                 { "columnname":"age", "columntype":"integer", "IndexType":"bplus" } ] }'</span> <span class="se">\</span>
      <span class="s2">"http://localhost:8501/testdb.test.eth/"</span>
</code></pre>
<p>Create a table by specifying database name, table name, owner and column details.  </p>

<p>Columns consist of the following parameters:  </p>

<ul>
<li><strong>indextype</strong>: enter the integer value corresponding with the desired indextype (<a href="https://github.com/wolktoken/swarm.wolk.com/wiki/8.-SWARMDB-Types#table-column-types">more details</a>)<br></li>
<li><strong>columnname</strong>: enter the desired column name (no spaces allowed)<br></li>
<li><strong>columntype</strong>: enter the integer value corresponding with the desired columntype (<a href="https://github.com/wolktoken/swarm.wolk.com/wiki/8.-SWARMDB-Types#table-index-types">more details</a>)<br></li>
<li><strong>primary</strong>: enter 1 if the column is the primary key and 0 for any other column<br></li>
</ul>
<h1 id='opening-a-database'>Opening a Database</h1>
<p>In Go, a database object should be created using the connection.</p>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// not required</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (db *SWARMDBConnection) Open(owner string, databaseName string)</span><span class="x">
</span><span class="n">owner</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"test.eth"</span><span class="x">
</span><span class="n">databaseName</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"testdb"</span><span class="x">
</span><span class="n">db</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">conn</span><span class="o">.</span><span class="n">OpenDatabase</span><span class="p">(</span><span class="n">owner</span><span class="p">,</span><span class="x"> </span><span class="n">databaseName</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not create database"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><h1 id='opening-a-table'>Opening a Table</h1>
<p>To open a table, a table object must be created using the database object.</p>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// TBD</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (tbl *SWARMDBTable) Open(tableName string)</span><span class="x">
</span><span class="n">tbl</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">db</span><span class="o">.</span><span class="n">Open</span><span class="p">(</span><span class="n">tableName</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not open table"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>// not required
</code></pre><h1 id='read'>Read</h1>
<p>Reading a row (or rows) from SWARMDB tables may be done via the GET call or running a SQL Select query.</p>
<h2 id='get'>Get</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// swarmdb.get(db, table, owner, key, callback)</span>
<span class="nx">swarmdb</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"contacts"</span><span class="p">,</span> <span class="s2">"test.eth"</span><span class="p">,</span> <span class="s2">"bertie@gmail.com"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (tbl *SWARMDBTable) Get(key string)</span><span class="x">
</span><span class="n">row</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">tbl</span><span class="o">.</span><span class="n">Get</span><span class="p">(</span><span class="s">"bertie@gmail.com"</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not Get row"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Row: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"http://localhost:8501/testdb.test.eth/contacts/bertie@gmail.com"</span>
</code></pre>
<p>Get calls allow for the retrieval of a single row by specifying the value of a rows primary key.</p>
<h2 id='select'>Select</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// swarmdb.query(sqlQuery, db, owner, callback)</span>
<span class="nx">swarmdb</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">"SELECT email, name, age FROM contacts WHERE email = 'bertie@gmail.com'"</span><span class="p">,</span> <span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"test.eth"</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (db *SWARMDBDatabase) Query(query string) (rows []Row, err error)</span><span class="x">
</span><span class="n">query</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"SELECT email, name, age FROM contacts WHERE email=</span><span class="se">\"</span><span class="s">bertie@gmail.com</span><span class="se">\"</span><span class="s">"</span><span class="x">
</span><span class="n">rows</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">db</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not Get row"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span><span class="k">for</span><span class="x"> </span><span class="n">i</span><span class="p">,</span><span class="x"> </span><span class="n">row</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="k">range</span><span class="x"> </span><span class="n">rows</span><span class="x"> </span><span class="p">{</span><span class="x">
    </span><span class="n">fmt</span><span class="o">.</span><span class="n">Printf</span><span class="p">(</span><span class="s">"Row %d: %v</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="x"> </span><span class="n">i</span><span class="p">,</span><span class="x"> </span><span class="n">row</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -d <span class="s1">'{ "requesttype":"Query", \
                   "query":"SELECT email, name, age FROM contacts WHERE email=\"bertie@gmail.com\" " }'</span> <span class="se">\</span>
     <span class="s2">"http://localhost:8501/testdb.test.eth/"</span>
</code></pre>
<p>Select Query calls allow for the retrieval of rows by specifying a SELECT query using standard SQL.  The <a href="https://github.com/wolktoken/swarm.wolk.com/wiki/8.-SWARMDB-Types#supported-query-operands">supported query operands</a> are allowed to be used on both primary and secondary keys.</p>
<h1 id='write'>Write</h1>
<p>Writing a row (or rows) to SWARMDB tables may be done via the PUT call or running a SQL INSERT query.</p>
<h2 id='put'>Put</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// swarmdb.put(db, table, owner, rows, callback)</span>
<span class="nx">swarmdb</span><span class="p">.</span><span class="nx">put</span><span class="p">(</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"contacts"</span><span class="p">,</span> <span class="s2">"test.eth"</span><span class="p">,</span> <span class="p">[</span> <span class="p">{</span> <span class="s2">"name"</span><span class="p">:</span> <span class="s2">"Bertie Basset"</span><span class="p">,</span> <span class="s2">"age"</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span> <span class="s2">"email"</span><span class="p">:</span> <span class="s2">"bertie@gmail.com"</span> <span class="p">}</span> <span class="p">],</span>  <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (table *SWARMDBTable) Put(row Row) (error err)</span><span class="x">
</span><span class="k">var</span><span class="x"> </span><span class="n">r</span><span class="x"> </span><span class="n">swarmdb</span><span class="o">.</span><span class="n">Row</span><span class="x">
</span><span class="n">r</span><span class="o">.</span><span class="n">Cells</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="nb">make</span><span class="p">(</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="k">interface</span><span class="p">{})</span><span class="x">
</span><span class="n">r</span><span class="o">.</span><span class="n">Cells</span><span class="p">[</span><span class="s">"email"</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"bertie@gmail.com"</span><span class="x">
</span><span class="n">r</span><span class="o">.</span><span class="n">Cells</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="s">"Bertie Basset"</span><span class="x">
</span><span class="n">r</span><span class="o">.</span><span class="n">Cells</span><span class="p">[</span><span class="s">"age"</span><span class="p">]</span><span class="x"> </span><span class="o">=</span><span class="x"> </span><span class="m">7</span><span class="x">
</span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">tbl</span><span class="o">.</span><span class="n">Put</span><span class="p">(</span><span class="n">row</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not Put row"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -d <span class="s1">'{ "requesttype":"Put", \
                   "row":{"email":"bertie@gmail.com", "name":"Bertie Basset", "age":7} }'</span> <span class="se">\</span>
     <span class="s2">"http://localhost:8501/testdb.test.eth/contacts"</span>
</code></pre>
<p>Put calls allow for writing rows.</p>

<aside class="notice">The "rows" input consists of an array rows, where a row is a defined as a json object containing column/value pairs.  Each row must at least include a column/value pair for the primary key.</aside>
<h2 id='insert'>Insert</h2><pre class="highlight javascript tab-javascript"><code><span class="c1">// swarmdb.query(sqlQuery, db, owner, callback)</span>
<span class="nx">swarmdb</span><span class="p">.</span><span class="nx">query</span><span class="p">(</span><span class="s2">"INSERT INTO contacts(email, name, age) VALUES('bertie@gmail.com','Bertie',7);"</span><span class="p">,</span> <span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"test.eth"</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">throw</span> <span class="nx">err</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">});</span>
</code></pre><pre class="highlight go tab-go"><code><span class="c">// (db *SWARMDBConnection) Query(query string) (rows []Row, error)</span><span class="x">
</span><span class="n">query</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="s">"INSERT INTO contacts(email, name, age) VALUES(‘bertie@gmail.com’,’Bertie Basset’,7)"</span><span class="x">
</span><span class="n">rows</span><span class="p">,</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">:=</span><span class="x"> </span><span class="n">db</span><span class="o">.</span><span class="n">Query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span><span class="x">
</span><span class="k">if</span><span class="x"> </span><span class="n">err</span><span class="x"> </span><span class="o">!=</span><span class="x"> </span><span class="no">nil</span><span class="x"> </span><span class="p">{</span><span class="x">
   </span><span class="nb">panic</span><span class="p">(</span><span class="s">"could not Get row"</span><span class="p">)</span><span class="x">
</span><span class="p">}</span><span class="x">
</span></code></pre><pre class="highlight shell tab-shell"><code>curl -X POST -d <span class="s1">'{ "requesttype":"Query", \
                   "query":"INSERT INTO contacts(email, name, age) VALUES(‘bertie@gmail.com’,’Bertie Basset’,7) " }'</span> <span class="se">\</span>
     <span class="s2">"http://localhost:8501/testdb.test.eth/"</span>
</code></pre>
<p>Insert Query calls allow for the insertion of rows by specifying an INSERT query using standard SQL. SWARMDB currently only supports one row insert per call.</p>
<h1 id='errors'>Errors</h1>
<p>The SWARMDB API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad JSON supplied: [JSON]</td>
</tr>
<tr>
<td>401</td>
<td>SQL Parsing error: [SQLError in SQL]</td>
</tr>
<tr>
<td>402</td>
<td>Key Not Found: [key]</td>
</tr>
<tr>
<td>403</td>
<td>Table Does Not Exist:  Table: [tableName] Owner: [ownerID]</td>
</tr>
<tr>
<td>404</td>
<td>Column Does Not Exist in table definition: [columnName]</td>
</tr>
<tr>
<td>405</td>
<td>No Primary Key specified in Create Table</td>
</tr>
<tr>
<td>406</td>
<td>Multiple Primary keys specified in Create Table</td>
</tr>
<tr>
<td>407</td>
<td>Invalid ColumnType: [columnType]</td>
</tr>
<tr>
<td>408</td>
<td>Invalid IndexType: [indexType]</td>
</tr>
<tr>
<td>409</td>
<td>Max Allowed Columns exceeded - [Num Columns] supplied, max is [MaxNumColumns]</td>
</tr>
<tr>
<td>410</td>
<td>Max Allowed Record size exceeded - [RecordSize] provided,</td>
</tr>
<tr>
<td>411</td>
<td>SWARM Error on Write [Details]</td>
</tr>
<tr>
<td>412</td>
<td>SWARM Error on Read [Details]</td>
</tr>
<tr>
<td>413</td>
<td>ENS Error</td>
</tr>
<tr>
<td>414</td>
<td>Invalid Challenge Response</td>
</tr>
<tr>
<td>415</td>
<td>Insufficient Permissions</td>
</tr>
<tr>
<td>416</td>
<td>No Table Owner specified</td>
</tr>
<tr>
<td>417</td>
<td>Table Owner mismatch</td>
</tr>
<tr>
<td>418</td>
<td>Request Invalid</td>
</tr>
<tr>
<td>419</td>
<td>Invalid Signature Length: Must be 65 characters</td>
</tr>
<tr>
<td>420</td>
<td>Invalid Signature: Unable to Retrieve Public Key</td>
</tr>
<tr>
<td>421</td>
<td>User Address not configured on connected node.</td>
</tr>
<tr>
<td>422</td>
<td>Unable to decode response</td>
</tr>
<tr>
<td>423</td>
<td>Error Decoding Signed Message</td>
</tr>
<tr>
<td>424</td>
<td>Error In HTTP Request</td>
</tr>
<tr>
<td>425</td>
<td>Invalid Query Request. Missing Rawquery</td>
</tr>
<tr>
<td>426</td>
<td>Table Name Missing</td>
</tr>
<tr>
<td>427</td>
<td>Mismatched Column Types</td>
</tr>
<tr>
<td>428</td>
<td>Row missing primary key</td>
</tr>
<tr>
<td>429</td>
<td>Row contains unknown column [columnName]</td>
</tr>
<tr>
<td>430</td>
<td>TableOwner Missing</td>
</tr>
<tr>
<td>431</td>
<td>Scans on Column [column] not unsupported due to indextype</td>
</tr>
<tr>
<td>432</td>
<td>WHERE Clause contains invalid column [column name]</td>
</tr>
<tr>
<td>433</td>
<td>GET Request Missing Key</td>
</tr>
<tr>
<td>434</td>
<td>Record with key [keyvalue] already exists. If you wish to modify, please use UPDATE SQL statement or PUT</td>
</tr>
<tr>
<td>435</td>
<td>Invalid Row Data</td>
</tr>
<tr>
<td>436</td>
<td>Unable to converty byte array to Row Object</td>
</tr>
<tr>
<td>437</td>
<td>ColumnType [type] not SUPPORTED. Value [value] rejected</td>
</tr>
<tr>
<td>438</td>
<td>Invalid Request Body</td>
</tr>
<tr>
<td>439</td>
<td>Failure to store [CHUNKTYPE] Chunk</td>
</tr>
<tr>
<td>440</td>
<td>Enable to retrieve [CHUNKTYPE] Chunk</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">Node.js</a>
                <a href="#" data-language-name="go">Go</a>
                <a href="#" data-language-name="shell">HTTP</a>
          </div>
      </div>
    </div>
  </body>
</html>
