
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="images/wolk_favicon.png" rel="icon" type="image/png" />
    <title>WOLK API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" /></center>
      </span>
    </a>
    <div class="toc-wrapper">
      <center><img src="images/logo.png" class="logo" alt="Logo" /></center>
        <div class="lang-selector">
              <a href="#" data-language-name="javascript">Node.js</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
          </li>
          <li>
            <a href="#install" class="toc-h1 toc-link" data-title="install">Install</a>
          </li>
          <li>
            <a href="#connect-to-plasma-node" class="toc-h1 toc-link" data-title="connect-to-plasma-node">Connect to Plasma Node</a>
          </li>
          <li>
            <a href="#plasma-operations" class="toc-h1 toc-link" data-title="plasma-operations">Plasma Operations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#retrieve-plasma-tokens-and-token-balances" class="toc-h2 toc-link" data-title="retrieve-plasma-tokens-and-token-balances">Retrieve Plasma Tokens and Token Balances</a>
                  </li>
                  <li>
                    <a href="#retrieve-blockchainid" class="toc-h2 toc-link" data-title="retrieve-blockchainid">Retrieve BlockchainID</a>
                  </li>
                  <li>
                    <a href="#send-initial-anchor-transaction" class="toc-h2 toc-link" data-title="send-initial-anchor-transaction">Send Initial Anchor Transaction</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#configure-wolk-node" class="toc-h1 toc-link" data-title="configure-wolk-node">Configure Wolk Node</a>
          </li>
          <li>
            <a href="#connect-to-wolk-node" class="toc-h1 toc-link" data-title="connect-to-wolk-node">Connect to Wolk Node</a>
          </li>
          <li>
            <a href="#nosql-operations" class="toc-h1 toc-link" data-title="nosql-operations">NoSQL Operations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#setkey" class="toc-h2 toc-link" data-title="setkey">SetKey</a>
                  </li>
                  <li>
                    <a href="#getkey" class="toc-h2 toc-link" data-title="getkey">GetKey</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#sql-operations" class="toc-h1 toc-link" data-title="sql-operations">SQL Operations</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#create-database" class="toc-h2 toc-link" data-title="create-database">Create database</a>
                  </li>
                  <li>
                    <a href="#list-databases" class="toc-h2 toc-link" data-title="list-databases">List databases</a>
                  </li>
                  <li>
                    <a href="#create-table" class="toc-h2 toc-link" data-title="create-table">Create table</a>
                  </li>
                  <li>
                    <a href="#describe-table" class="toc-h2 toc-link" data-title="describe-table">Describe Table</a>
                  </li>
                  <li>
                    <a href="#list-tables" class="toc-h2 toc-link" data-title="list-tables">List Tables</a>
                  </li>
                  <li>
                    <a href="#insert-query" class="toc-h2 toc-link" data-title="insert-query">INSERT Query</a>
                  </li>
                  <li>
                    <a href="#select-query" class="toc-h2 toc-link" data-title="select-query">SELECT Query</a>
                  </li>
                  <li>
                    <a href="#update-query" class="toc-h2 toc-link" data-title="update-query">UPDATE Query</a>
                  </li>
                  <li>
                    <a href="#delete-query" class="toc-h2 toc-link" data-title="delete-query">DELETE Query</a>
                  </li>
                  <li>
                    <a href="#drop-table" class="toc-h2 toc-link" data-title="drop-table">Drop table</a>
                  </li>
                  <li>
                    <a href="#drop-database" class="toc-h2 toc-link" data-title="drop-database">Drop database</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="errors">Errors</a>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>wolkjs is a client library for the Wolk API, implemented in JavaScript. It&#39;s available on npm as a node module.</p>

<p>To use wolkjs, for your desired database type (NoSQL or SQL), you MUST either</p>

<ul>
<li>Install WolkDB via source code or the docker image for your db type</li>
<li>Register your address on the WolkDB Public Gateway. (Available in Dec. 2018)</li>
</ul>

<p>Instructions for setting up and testing your own node can be found HERE.</p>

<p>Please note that the library is still under development and may not be stable.</p>

<p>If you require further assistance, feel free to shoot us an email: <a href="mailto:services@wolk.com">services@wolk.com</a></p>
<h1 id='install'>Install</h1>
<p>To use WOLK API, you need to install the corresponding library.</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">$</span> <span class="nx">npm</span> <span class="nx">install</span> <span class="nx">wolkjs</span>
</code></pre><h1 id='connect-to-plasma-node'>Connect to Plasma Node</h1>
<p>Open a connection by specifying the host and port of the Plasma node.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">wolkjsAPI</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"wolkjs"</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">PLASMAHOST</span> <span class="o">=</span> <span class="s2">"plasma.wolk.com"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">PLASMAPORT</span> <span class="o">=</span> <span class="s2">"80"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">PLASMAADDR</span> <span class="o">=</span> <span class="s2">"http://"</span> <span class="o">+</span> <span class="nx">PLASMAHOST</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nx">PLASMAPORT</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">plasmanode</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wolkjsAPI</span><span class="p">(</span><span class="nx">PLASMAADDR</span><span class="p">);</span>
</code></pre><h1 id='plasma-operations'>Plasma Operations</h1><h2 id='retrieve-plasma-tokens-and-token-balances'>Retrieve Plasma Tokens and Token Balances</h2>
<p>Retrieve plasma tokens and token balance by specifying address and block number</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">registered_address</span> <span class="o">=</span> <span class="s2">"0xAA96B58F7ee51d2445fE596C3535874F5E206B14"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">blockNumber</span> <span class="o">=</span> <span class="s2">"latest"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">plasmaBalance</span> <span class="o">=</span> <span class="nx">plasmanode</span><span class="p">.</span><span class="nx">getPlasmaBalance</span><span class="p">(</span><span class="nx">registered_address</span><span class="p">,</span> <span class="nx">blockNumber</span><span class="p">);</span>
<span class="c1">// plasmaBalance result:</span>
<span class="p">{</span> <span class="nl">account</span><span class="p">:</span>
   <span class="p">{</span> <span class="nl">tokens</span><span class="p">:</span> <span class="p">[</span> <span class="s1">'0x1962836485220a62'</span> <span class="p">],</span>
     <span class="nx">denomination</span><span class="p">:</span> <span class="s1">'0x2386f26fc10000'</span><span class="p">,</span>
     <span class="nx">balance</span><span class="p">:</span> <span class="s1">'0x2386f26fc10000'</span> <span class="p">}</span> 
<span class="p">}</span>
</code></pre><h2 id='retrieve-blockchainid'>Retrieve BlockchainID</h2>
<p>Retrieve blockchainID by specifying tokenID and block number</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">tokenId</span> <span class="o">=</span> <span class="nx">plasmaBalance</span><span class="p">.</span><span class="nx">account</span><span class="p">.</span><span class="nx">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="kd">var</span> <span class="nx">tokenObject</span> <span class="o">=</span> <span class="nx">plasmanode</span><span class="p">.</span><span class="nx">getPlasmaToken</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">,</span> <span class="s2">"latest"</span><span class="p">);</span>
<span class="c1">// tokenObject result</span>
<span class="p">{</span> <span class="nl">token</span><span class="p">:</span>
   <span class="p">{</span> <span class="nl">denomination</span><span class="p">:</span> <span class="s1">'0x2386f26fc10000'</span><span class="p">,</span>
     <span class="nx">prevBlock</span><span class="p">:</span> <span class="s1">'0x3'</span><span class="p">,</span>
     <span class="nx">owner</span><span class="p">:</span> <span class="s1">'0xaa96b58f7ee51d2445fe596c3535874f5e206b14'</span><span class="p">,</span>
     <span class="nx">balance</span><span class="p">:</span> <span class="s1">'0x2386f26fc10000'</span><span class="p">,</span>
     <span class="nx">allowance</span><span class="p">:</span> <span class="s1">'0x0'</span><span class="p">,</span>
     <span class="nx">spent</span><span class="p">:</span> <span class="s1">'0x0'</span> <span class="p">},</span>
  <span class="nx">tokenInfo</span><span class="p">:</span>
   <span class="p">{</span> <span class="nl">depositIndex</span><span class="p">:</span> <span class="s1">'0x3c'</span><span class="p">,</span>
     <span class="nx">denomination</span><span class="p">:</span> <span class="s1">'0x2386f26fc10000'</span><span class="p">,</span>
     <span class="nx">depositor</span><span class="p">:</span> <span class="s1">'0xaa96b58f7ee51d2445fe596c3535874f5e206b14'</span><span class="p">,</span>
     <span class="nx">tokenID</span><span class="p">:</span> <span class="s1">'0x1962836485220a62'</span> <span class="p">}</span> 
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">blockchainID</span> <span class="o">=</span> <span class="nx">plasmanode</span><span class="p">.</span><span class="nx">getBlockchainID</span><span class="p">(</span><span class="nx">tokenId</span><span class="p">,</span> <span class="nx">tokenObject</span><span class="p">.</span><span class="nx">tokenInfo</span><span class="p">.</span><span class="nx">depositIndex</span><span class="p">);</span>
<span class="c1">// blockchainID result: '0xcd778162be0d4f2'</span>
</code></pre><h2 id='send-initial-anchor-transaction'>Send Initial Anchor Transaction</h2>
<p>To register your blockchain with the plasma node by sending the initial anchor transaction</p>
<pre class="highlight javascript tab-javascript"><code><span class="c1">// For all initial Anchor Transactions, use 0x03c85f1da84d9c6313e0c34bcb5ace945a9b12105988895252b88ce5b769f82b</span>
<span class="kd">var</span> <span class="nx">genesisBlockHash</span> <span class="o">=</span> <span class="s2">"0x03c85f1da84d9c6313e0c34bcb5ace945a9b12105988895252b88ce5b769f82b"</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">rlp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'rlp'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">web3</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'web3'</span><span class="p">);</span>
<span class="nx">web3Obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">web3</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">atxExtra</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">registered_address</span> <span class="p">],</span> <span class="p">[]</span> <span class="p">];</span>
<span class="kd">var</span> <span class="nx">anchorTxJson</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"blockchainID"</span><span class="p">:</span> <span class="nx">blockchainID</span><span class="p">,</span> <span class="s2">"blocknumber"</span><span class="p">:</span> <span class="s2">"0x0"</span><span class="p">,</span> <span class="s2">"blockhash"</span><span class="p">:</span> <span class="nx">genesisBlockHash</span><span class="p">,</span> <span class="s2">"extra"</span><span class="p">:</span> <span class="nx">atxExtra</span><span class="p">,</span> <span class="s2">"sig"</span><span class="p">:</span> <span class="s1">''</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">anchorTx</span> <span class="o">=</span> <span class="p">[</span>
  <span class="nx">anchorTxJson</span><span class="p">.</span><span class="nx">blockchainID</span><span class="p">,</span>
  <span class="nx">anchorTxJson</span><span class="p">.</span><span class="nx">blocknumber</span><span class="p">,</span>
  <span class="nx">anchorTxJson</span><span class="p">.</span><span class="nx">blockhash</span><span class="p">,</span>
  <span class="nx">anchorTxJson</span><span class="p">.</span><span class="nx">extra</span><span class="p">,</span>
  <span class="s1">''</span><span class="p">,</span>
<span class="p">];</span>
<span class="kd">var</span> <span class="nx">encodedAnchorTx</span> <span class="o">=</span> <span class="nx">rlp</span><span class="p">.</span><span class="nx">encode</span><span class="p">(</span><span class="nx">anchorTx</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">encodedAnchorTxAsHex</span> <span class="o">=</span> <span class="nx">encodedAnchorTx</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="s1">'hex'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">shortHash</span> <span class="o">=</span> <span class="nx">web3</span><span class="p">.</span><span class="nx">sha3</span><span class="p">(</span><span class="nx">encodedAnchorTxAsHex</span><span class="p">,</span> <span class="p">{</span><span class="na">encoding</span><span class="p">:</span><span class="s1">'hex'</span><span class="p">});</span>

<span class="c1">// Example of signing with Metamask</span>
<span class="nx">alert</span><span class="p">(</span><span class="s2">"Check Metamask to Approve Signing and Sending Order"</span><span class="p">);</span>
<span class="nx">web3</span><span class="p">.</span><span class="nx">eth</span><span class="p">.</span><span class="nx">sign</span><span class="p">(</span><span class="nx">registered_address</span><span class="p">,</span> <span class="nx">shortHash</span><span class="p">,</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">sig</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Sending AnchorTX"</span><span class="p">)</span>
      <span class="nx">anchorTx</span><span class="p">.</span><span class="nx">sig</span> <span class="o">=</span> <span class="nx">sig</span><span class="p">;</span>
      <span class="nx">plasmanode</span><span class="p">.</span><span class="nx">sendAnchorTransaction</span><span class="p">(</span><span class="nx">anchorTx</span><span class="p">)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h1 id='configure-wolk-node'>Configure Wolk Node</h1>
<p>For the next steps you will need to have a running WolkDB node
 * If you set up your own WolkDB node, make sure to set the blockchainId to the blockchainID retrieved via the steps described above
 * If you registered your address directly with the WolkDB Public Gateway, you should have received the corresponding blockchainID for the selected database type.  Please contact services@wolk.com if you did not.  Those using the public gateway MUST use the blockchainID returned for their requests to work.</p>

<p>Steps for downloading and launching docker can be found at: ___</p>
<h1 id='connect-to-wolk-node'>Connect to Wolk Node</h1>
<p>Open a connection by specifying configuration options like host and port</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">HOST</span> <span class="o">=</span> <span class="s2">"localhost"</span>
<span class="kd">var</span> <span class="nx">PORT</span> <span class="o">=</span> <span class="s2">"24000"</span>
<span class="kd">var</span> <span class="nx">WOLKADDR</span> <span class="o">=</span> <span class="s2">"http://"</span> <span class="o">+</span> <span class="nx">HOST</span> <span class="o">+</span> <span class="s2">":"</span> <span class="o">+</span> <span class="nx">PORT</span>

<span class="kd">var</span> <span class="nx">wolknode</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">wolkjsAPI</span><span class="p">(</span><span class="nx">WOLKADDR</span><span class="p">)</span>
</code></pre><h1 id='nosql-operations'>NoSQL Operations</h1><h2 id='setkey'>SetKey</h2>
<p>Set a key value pair</p>
<pre class="highlight javascript tab-javascript"><code><span class="nx">wolknode</span><span class="p">.</span><span class="nx">setKey</span><span class="p">(</span><span class="s2">"blockchainID"</span><span class="p">,</span> <span class="s2">"key"</span><span class="p">,</span> <span class="s2">"val"</span><span class="p">)</span>

<span class="c1">// setKey result:</span>
<span class="p">{</span> <span class="nl">txhash</span><span class="p">:</span>
   <span class="s1">'2471d3ed40ba6ddb3ff0ea12cdae2f378d6ef146025d5a2b3ef02325af9d0677'</span> <span class="p">}</span>
</code></pre><h2 id='getkey'>GetKey</h2>
<p>Get the value corresponding to a given key</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">wolknode</span><span class="p">.</span><span class="nx">getKey</span><span class="p">(</span><span class="s2">"blockchainID"</span><span class="p">,</span> <span class="s2">"key"</span><span class="p">)</span>

<span class="c1">// getKey result:</span>
<span class="p">{</span> <span class="nl">proof</span><span class="p">:</span> <span class="s1">'{"token":"07855b46a623a8ec","proofBits":"0","proof":[]}'</span><span class="p">,</span>
  <span class="nx">value</span><span class="p">:</span> <span class="s1">'valueA'</span> <span class="p">}</span>
</code></pre><h1 id='sql-operations'>SQL Operations</h1><h2 id='create-database'>Create database</h2>
<p>Create a database by specifying your blockchainID, the requesttype (&quot;CreateDatabase&quot;), an owner (will be specific to your blockchain) and database name.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">createDatabaseCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"CreateDatabase"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span> <span class="p">}</span>
<span class="nx">wolknode</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">createDatabaseCommand</span><span class="p">)</span>
<span class="c1">// result:</span>
<span class="p">{</span> <span class="nl">txhash</span><span class="p">:</span> <span class="s2">"4450a4f4fde8f0b49d83d2ec3b1185cdc66b287748e546afa55571d887021cc8"</span> <span class="p">}</span>
</code></pre><h2 id='list-databases'>List databases</h2>
<p>List existing databases by specifying your blockchainID, the requesttype (&quot;ListDatabases&quot;), an owner (will be specific to your blockchain) and (optionally) the blocknumber.  If blocknumber is not included, the request defaults to returning data that corresponds with the latest block minted.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">listDatabasesCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"ListDatabases"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"blocknumber"</span><span class="p">:</span><span class="mi">1</span> <span class="p">})</span>
<span class="nx">wolknode</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">listDatabasesCommand</span><span class="p">)</span>
<span class="c1">// result:</span>
<span class="p">{</span>
  <span class="nl">result</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">data</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">database</span><span class="p">:</span> <span class="s2">"testdb"</span>
    <span class="p">}],</span>
    <span class="nx">matchedrowcount</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h2 id='create-table'>Create table</h2>
<p>Create a table by specifying your blockchainID and a CREATE TABLE SQL statement.</p>

<p>Note: current supported types for columns are <code>string</code>, <code>integer</code>, <code>float</code> and a table must have a primary key.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">createTableSQL</span> <span class="o">=</span> <span class="s2">"CREATE TABLE demoitems(ID string primary key, Name string, Description string, Price float, Currency string, Hash string)"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">createTableCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"CreateTable"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"query"</span><span class="p">:</span> <span class="nx">createTableSQL</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">createTableCommand</span><span class="p">)</span>
<span class="c1">// result:</span>
<span class="p">{</span>
  <span class="nl">txhash</span><span class="p">:</span> <span class="s2">"98827bbd28f1cf65f91dbc0abdb7e50e6bb4a9d4fb69283b1ca5ff828c686a9b"</span>
<span class="p">}</span>
</code></pre><h2 id='describe-table'>Describe Table</h2>
<p>To see the table definition of a table, specify your blockchainID along with the owner by specifying table name.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">describeTableCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"DescribeTable"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"table"</span><span class="p">:</span><span class="s2">"demoitems"</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">describeTableCommand</span><span class="p">)</span>
</code></pre><h2 id='list-tables'>List Tables</h2>
<p>To list the tables that belong to a given database, specify your blockchainID, owner, database and (optionally) blocknumber</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">listTablesCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"ListTables"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"blocknumber"</span><span class="p">:</span><span class="mi">3</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">listTablesCommand</span><span class="p">)</span>

<span class="c1">// result:</span>
<span class="p">{</span>
  <span class="nl">result</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">data</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">table</span><span class="p">:</span> <span class="s2">"demoitems"</span>
    <span class="p">}],</span>
    <span class="nx">matchedrowcount</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre><h2 id='insert-query'>INSERT Query</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">sql1</span> <span class="o">=</span> <span class="s2">"INSERT INTO demoitems(ID, Name, Description, Price, Currency, Hash) VALUES('ID1','Item1','Hot Item #1',0.11,'ethereum', 'Qmd286K6pohQcTKYqnS1YhWrCiS4gz7Xi34sdwMe9USZ7u')"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">sql2</span> <span class="o">=</span> <span class="s2">"INSERT INTO demoitems(ID, Name, Description, Price, Currency, Hash) VALUES('ID2','Item2','Hot Item #2',0.09,'ethereum', 'Qme1gTwdtFaUMoqwTNWX5SdYmNfiAj4N88qujbxmsX5z6u')"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">queryCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"Query"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"query"</span><span class="p">:</span> <span class="nx">sql1</span> <span class="p">};</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">queryCommand</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">queryCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"Query"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"query"</span><span class="p">:</span> <span class="nx">sql2</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">queryCommand</span><span class="p">)</span>
</code></pre><h2 id='select-query'>SELECT Query</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">sql3</span> <span class="o">=</span> <span class="s2">"SELECT * FROM demoitems"</span>
<span class="kd">var</span> <span class="nx">sql4</span> <span class="o">=</span> <span class="s2">"SELECT * FROM demoitems WHERE price &gt; 0.10"</span>
<span class="kd">var</span> <span class="nx">queryCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"Query"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"query"</span><span class="p">:</span> <span class="nx">sql3</span> <span class="p">}</span>
<span class="kd">var</span> <span class="nx">rows</span> <span class="o">=</span> <span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">queryCommand</span><span class="p">)</span>
<span class="c1">// result:</span>
<span class="p">{</span>
  <span class="nl">result</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">data</span><span class="p">:</span> <span class="p">[{</span>
        <span class="na">ID</span><span class="p">:</span> <span class="s2">"ID1"</span><span class="p">,</span>
        <span class="na">Name</span><span class="p">:</span> <span class="s2">"Item1"</span><span class="p">,</span>
        <span class="na">Description</span><span class="p">:</span> <span class="s2">"Hot Item #1"</span><span class="p">,</span>
        <span class="na">Price</span><span class="p">:</span><span class="mf">0.11</span><span class="p">,</span>
        <span class="na">Currency</span><span class="p">:</span><span class="s1">'ethereum'</span><span class="p">,</span>
        <span class="na">Hash</span><span class="p">:</span><span class="s1">'Qmd286K6pohQcTKYqnS1YhWrCiS4gz7Xi34sdwMe9USZ7u'</span>
    <span class="p">},{</span>
        <span class="na">ID</span><span class="p">:</span> <span class="s2">"ID2"</span><span class="p">,</span>
        <span class="na">Name</span><span class="p">:</span> <span class="s2">"Item2"</span><span class="p">,</span>
        <span class="na">Description</span><span class="p">:</span> <span class="s2">"Hot Item #2"</span><span class="p">,</span>
        <span class="na">Price</span><span class="p">:</span><span class="mf">0.09</span><span class="p">,</span>
        <span class="na">Currency</span><span class="p">:</span><span class="s1">'ethereum'</span><span class="p">,</span>
        <span class="na">Hash</span><span class="p">:</span><span class="s1">'Qme1gTwdtFaUMoqwTNWX5SdYmNfiAj4N88qujbxmsX5z6u'</span>
    <span class="p">}],</span>
    <span class="nx">matchedrowcount</span><span class="p">:</span> <span class="mi">2</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre><h2 id='update-query'>UPDATE Query</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">sql5</span> <span class="o">=</span> <span class="s2">"UPDATE demoitems SET Price = 0.13 WHERE ID='ID2'"</span>
<span class="kd">var</span> <span class="nx">queryCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"Query"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"query"</span><span class="p">:</span> <span class="nx">sql5</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">queryCommand</span><span class="p">)</span>
</code></pre><h2 id='delete-query'>DELETE Query</h2><pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">sql6</span> <span class="o">=</span> <span class="s2">"DELETE FROM demoitems WHERE ID='ID1'"</span>
<span class="kd">var</span> <span class="nx">queryCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"Query"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"query"</span><span class="p">:</span> <span class="nx">sql6</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">queryCommand</span><span class="p">)</span>
</code></pre><h2 id='drop-table'>Drop table</h2>
<p>Drop a table by specifying table name.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">dropTableCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"DropTable"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span><span class="p">,</span> <span class="s2">"table"</span><span class="p">:</span><span class="s2">"demoitems"</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">dropTableCommand</span><span class="p">)</span>
</code></pre><h2 id='drop-database'>Drop database</h2>
<p>Drop a database by specifying owner and database name.</p>
<pre class="highlight javascript tab-javascript"><code><span class="kd">var</span> <span class="nx">dropDatabaseCommand</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">"requesttype"</span><span class="p">:</span><span class="s2">"DropDatabase"</span><span class="p">,</span> <span class="s2">"owner"</span><span class="p">:</span><span class="s2">"wolkdb.eth"</span><span class="p">,</span> <span class="s2">"database"</span><span class="p">:</span><span class="s2">"testdb"</span> <span class="p">}</span>
<span class="nx">sql</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">blockchainID</span><span class="p">,</span> <span class="nx">dropTableCommand</span><span class="p">)</span>
</code></pre><h1 id='errors'>Errors</h1>
<p>The SWARMDB API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad JSON supplied: [JSON]</td>
</tr>
<tr>
<td>401</td>
<td>SQL Parsing error: [SQLError in SQL]</td>
</tr>
<tr>
<td>402</td>
<td>Key Not Found: [key]</td>
</tr>
<tr>
<td>403</td>
<td>Table Does Not Exist:  Table: [tableName] Owner: [ownerID]</td>
</tr>
<tr>
<td>404</td>
<td>Column Does Not Exist in table definition: [columnName]</td>
</tr>
<tr>
<td>405</td>
<td>No Primary Key specified in Create Table</td>
</tr>
<tr>
<td>406</td>
<td>Multiple Primary keys specified in Create Table</td>
</tr>
<tr>
<td>407</td>
<td>Invalid ColumnType: [columnType]</td>
</tr>
<tr>
<td>408</td>
<td>Invalid IndexType: [indexType]</td>
</tr>
<tr>
<td>409</td>
<td>Max Allowed Columns exceeded - [Num Columns] supplied, max is [MaxNumColumns]</td>
</tr>
<tr>
<td>410</td>
<td>Max Allowed Record size exceeded - [RecordSize] provided,</td>
</tr>
<tr>
<td>411</td>
<td>SWARM Error on Write [Details]</td>
</tr>
<tr>
<td>412</td>
<td>SWARM Error on Read [Details]</td>
</tr>
<tr>
<td>413</td>
<td>ENS Error</td>
</tr>
<tr>
<td>414</td>
<td>Invalid Challenge Response</td>
</tr>
<tr>
<td>415</td>
<td>Insufficient Permissions</td>
</tr>
<tr>
<td>416</td>
<td>No Table Owner specified</td>
</tr>
<tr>
<td>417</td>
<td>Table Owner mismatch</td>
</tr>
<tr>
<td>418</td>
<td>Request Invalid</td>
</tr>
<tr>
<td>419</td>
<td>Invalid Signature Length: Must be 65 characters</td>
</tr>
<tr>
<td>420</td>
<td>Invalid Signature: Unable to Retrieve Public Key</td>
</tr>
<tr>
<td>421</td>
<td>User Address not configured on connected node.</td>
</tr>
<tr>
<td>422</td>
<td>Unable to decode response</td>
</tr>
<tr>
<td>423</td>
<td>Error Decoding Signed Message</td>
</tr>
<tr>
<td>424</td>
<td>Error In HTTP Request</td>
</tr>
<tr>
<td>425</td>
<td>Invalid Query Request. Missing Rawquery</td>
</tr>
<tr>
<td>426</td>
<td>Table Name Missing</td>
</tr>
<tr>
<td>427</td>
<td>Mismatched Column Types</td>
</tr>
<tr>
<td>428</td>
<td>Row missing primary key</td>
</tr>
<tr>
<td>429</td>
<td>Row contains unknown column [columnName]</td>
</tr>
<tr>
<td>430</td>
<td>TableOwner Missing</td>
</tr>
<tr>
<td>431</td>
<td>Scans on Column [column] not unsupported due to indextype</td>
</tr>
<tr>
<td>432</td>
<td>WHERE Clause contains invalid column [column name]</td>
</tr>
<tr>
<td>433</td>
<td>GET Request Missing Key</td>
</tr>
<tr>
<td>434</td>
<td>Record with key [keyvalue] already exists. If you wish to modify, please use UPDATE SQL statement or PUT</td>
</tr>
<tr>
<td>435</td>
<td>Invalid Row Data</td>
</tr>
<tr>
<td>436</td>
<td>Unable to converty byte array to Row Object</td>
</tr>
<tr>
<td>437</td>
<td>ColumnType [type] not SUPPORTED. Value [value] rejected</td>
</tr>
<tr>
<td>438</td>
<td>Invalid Request Body</td>
</tr>
<tr>
<td>439</td>
<td>Failure to store [CHUNKTYPE] Chunk</td>
</tr>
<tr>
<td>440</td>
<td>Enable to retrieve [CHUNKTYPE] Chunk</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="javascript">Node.js</a>
          </div>
      </div>
    </div>
  </body>
</html>
